ensurePackage("guardian.r2");ensurePackage("guardian.r2");guardian.r2.browser={isWebKit:navigator.userAgent.indexOf("AppleWebKit/")>-1};
/*@cc_on
	@if (@_jscript_version == 5.7)
		if(window.XMLHttpRequest) {
			guardian.r2.browser.isIE7 = true;
		} else {
		guardian.r2.browser.isIE6 = true;
		};
	@elif (@_jscript_version == 5.6)
		guardian.r2.browser.isIE6 = true;
	@elif (@_jscript_version == 5.8)
		guardian.r2.browser.isIE8 = true;
	@end
@*/
function addEvent(obj,eventType,fn){if(typeof obj==="string"){obj=document.getElementById(obj)}if(eventType==="load"){loadEventList.addLoadEvent(fn);return true}if(!obj){return null}if(obj.addEventListener){obj.addEventListener(eventType,fn,false);return true}else{if(obj.attachEvent){var r=obj.attachEvent("on"+eventType,fn);return r}else{return false}}}var loadEventList=[];loadEventList.addLoadEvent=function(fn){if(loadEventList.hasFired){fn()}else{loadEventList[loadEventList.length]=fn}};loadEventList.hasFired=false;loadEventList.fireLoadEvents=function(){for(var i=0;
i<loadEventList.length;i++){loadEventList[i]()}loadEventList.hasFired=true};if(guardian.r2.browser.isWebKit){var _timer=setInterval(function(){if(/loaded|complete/.test(document.readyState)){clearInterval(_timer);loadEventList.fireLoadEvents()}},100)}else{if(document.addEventListener){document.addEventListener("DOMContentLoaded",loadEventList.fireLoadEvents,false)}else{
/*@cc_on @*/
/*@if (@_win32)
     document.write("<script id='__ie_onload' defer='defer' src='//:'><\/script>");
     var script = document.getElementById("__ie_onload");
     script.onreadystatechange = function() {
	     if (this.readyState == "complete") {
		     loadEventList.fireLoadEvents(); // call the onload handler
	     }
     };
     /*@end @*/
}}var safeLoadEventList=[];function addSafeLoadEvent(fn){if(!(guardian.r2.browser.isIE6||guardian.r2.browser.isIE7)){addEvent(document,"load",fn);return true}else{safeLoadEventList.push(fn);return true}}safeLoadEventList.hasFired=false;safeLoadEventList.fireLoadEvents=function(){for(var i=0;
i<safeLoadEventList.length;i++){safeLoadEventList[i]()}safeLoadEventList.hasFired=true};if((guardian.r2.browser.isIE6||guardian.r2.browser.isIE7)){window.attachEvent("onload",safeLoadEventList.fireLoadEvents)}function writeScript(src,asynchronous,callback){if(asynchronous){jQ.ajaxSetup({cache:true});jQ.getScript(src,callback)}else{document.write('<script type="text/javascript" src="'+src+'"><\/script>');document.close()}}function addClickListenersToMatchingElements(inElement,cssRule,clickListenerCallback){var elementsToAddListenersTo=guardian.r2.dom.element.getElementsByCssSelector(cssRule,inElement);for(var i=0;i<elementsToAddListenersTo.length;i++){addEvent(elementsToAddListenersTo[i],"click",clickListenerCallback)}}function classNameRegex(cl){return new RegExp("( |^)"+cl+"( |$)")}function removeClassName(el,className){el.className=el.className.replace(classNameRegex(className)," ").replace(/(^\s*|\s*$)/g,"")}function calculateXForCentredPopup(popupWidth){var leftPos=0;if(screen.availWidth>popupWidth){leftPos=Math.round((screen.availWidth-popupWidth)/2)
}return leftPos}function openScorePopup(url){if(guardian.r2.browser.isIE6||guardian.r2.browser.isIE7){var height=405;var width=767}else{var height=400;var width=747}var leftPos=0;window.open(url,"_blank","resizable=yes,scrollbars=yes,location=no,toolbar=no,status=no,top=0,screenY=0,left="+leftPos+",screenX="+leftPos+",height="+height+",width="+width);return false}function popUpNewWindow(url,width,height){newwindow=window.open(url,"sponsor","height="+height+",width="+width+",scrollbars=yes,location=yes,toolbar=yes,status=yes,resizable=yes");if(window.focus){newwindow.focus()}return false}function GUopenParent(target){if(window.opener){window.opener.location=target}else{location=target}}function readCookie(name){var nameEQ=name+"=";var cookieArray=document.cookie.split(";");for(var i=0;i<cookieArray.length;i++){var cookie=cookieArray[i];while(cookie.charAt(0)==" "){cookie=cookie.substring(1,cookie.length)}if(cookie.indexOf(nameEQ)===0){return cookie.substring(nameEQ.length,cookie.length)}}return null
}function createCookie(name,value,days){if(days){var date=new Date();date.setTime(date.getTime()+(days*24*60*60*1000));var expires="; expires="+date.toGMTString()}else{var expires=""}document.cookie=name+"="+value+expires+"; path=/"}function isUserLoggedIntoRegPss(){return readCookie("GU_ME")!=null}function getScrollPosition(){var scrollX,scrollY;if(self.pageYOffset){scrollX=self.pageXOffset;scrollY=self.pageYOffset}else{if(document.documentElement&&document.documentElement.scrollTop){scrollX=document.documentElement.scrollLeft;scrollY=document.documentElement.scrollTop}else{if(document.body){scrollX=document.body.scrollLeft;scrollY=document.body.scrollTop}}}return{x:scrollX,y:scrollY}}function getCenterPosition(){var centerX,centerY;if(self.innerHeight){centerX=self.innerWidth;centerY=self.innerHeight}else{if(document.documentElement&&document.documentElement.clientHeight){centerX=document.documentElement.clientWidth;centerY=document.documentElement.clientHeight}else{if(document.body){centerX=document.body.clientWidth;
centerY=document.body.clientHeight}}}return{x:centerX,y:centerY}}function getScrollAndCenterPosition(){var scroll=getScrollPosition();var center=getCenterPosition();return{scrollX:scroll.x,scrollY:scroll.y,centerX:center.x,centerY:center.y}}function getAncestorOfType(object,tagType){if(!object.tagName){return null}else{return(object.tagName.toLowerCase()===tagType)?object:getAncestorOfType(object.parentNode,tagType)}}function arrayIndexOf(array,value){for(var i=0;i<array.length;i++){if(array[i]===value){return i}}return -1}function isArray(value){return value&&typeof value==="object"&&typeof value.length==="number"&&typeof value.splice==="function"&&!(value.propertyIsEnumerable("length"))}function arrayContains(theArray,theValue){for(var i=0;i<theArray.length;i++){if(theArray[i]===theValue){return true}}return false}function forEachElementOf(list,doThis){var listLength=list.length;for(var i=0;i<listLength;i++){doThis(list[i],i)}}function toggleHideOnPopupElements(visibility){var elementsToBeHidden=jQ(".hide-on-popup");
elementsToBeHidden.css({visibility:visibility})}var applyImageMaskImmediate;var applyFullScreenImageMask;var removeFullScreenImageMask;var ensureElementHasLayoutInIE6;(function(){var root=commonStaticRoot+"styles/images/";function getMaskDef(maskName,width,height){var lowerCaseMaskName=maskName.toLowerCase();function defaultMaskDef(url){return{url:url,width:width,height:height}}if(width>=140&&height>=84){if(guardian.r2.browser.isIE6){return{url:root+lowerCaseMaskName+"_140ie6.png",width:140,height:84}}else{return{url:root+lowerCaseMaskName+"_140.png",width:140,height:84}}}return null}function createIE6BackgroundDiv(maskDef){var newImageDiv=document.createElement("div");newImageDiv.style.width=maskDef.width+"px";newImageDiv.style.height=maskDef.height+"px";newImageDiv.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+maskDef.url+"',sizingMethod='scale')";newImageDiv.style.position="absolute";newImageDiv.style.left=String(-maskDef.leftOffset);newImageDiv.style.top=String(-maskDef.topOffset);
newImageDiv.style.zIndex="100";return newImageDiv}var applyMaskInIE=function(parentNode,maskDef){maskDef.leftOffset=maskDef.topOffset=0;var newImageDiv=createIE6BackgroundDiv(maskDef);newImageDiv.className="mask";parentNode.style.position="relative";parentNode.style.display="block";ensureElementHasLayoutInIE6(parentNode);parentNode.appendChild(newImageDiv);if(document.getElementById("content")){document.getElementById("content").style.display="none";document.getElementById("content").style.display="block"}return newImageDiv};var applyMask=function(originalElement,parentNode,maskDef){parentNode.style.display="block";parentNode.style.position="relative";var newImage=originalElement.cloneNode(false);newImage.style.width=maskDef.width+"px";newImage.style.height=maskDef.height+"px";newImage.setAttribute("src",maskDef.url);newImage.className="mask";newImage.setAttribute("alt","");parentNode.appendChild(newImage);return newImage};getNumberPropertyValue=function(originalElement,propertyName){var propVal=Number(originalElement.getAttribute(propertyName));
if(propVal===0){if(document.defaultView&&document.defaultView.getComputedStyle){propVal=document.defaultView.getComputedStyle(originalElement,"").getPropertyValue(propertyName)}else{if(originalElement.currentStyle){propVal=originalElement.currentStyle[propertyName]}}if(propVal!==null){propVal=parseInt(propVal.replace("px",""),10)}}if(!isNaN(propVal)&&propVal!==null){return propVal}else{return 0}};applyImageMaskImmediate=function(originalElement,maskName){var parentNode=originalElement.parentNode;var width=getNumberPropertyValue(originalElement,"width");var height=getNumberPropertyValue(originalElement,"height");var maskDef=getMaskDef(maskName,width,height);if(maskDef){if(guardian.r2.browser.isIE6||guardian.r2.browser.isIE7){return applyMaskInIE(parentNode,maskDef)}else{return applyMask(originalElement,parentNode,maskDef)}}};var applyFullScreenMaskInIE6=function(parentNode,maskDef){var newImageDiv=createIE6BackgroundDiv(maskDef);ensureElementHasLayoutInIE6(parentNode);parentNode.insertBefore(newImageDiv,parentNode.firstChild);
return newImageDiv};applyFullScreenImageMask=function(elementThatContainsThingToNOTHide){if(guardian.r2.browser.isIE6){document.body.parentNode.style.overflow="hidden";var element=document.getElementById(elementThatContainsThingToNOTHide);var leftOffset=element.offsetParent.offsetLeft;var body=document.body;return applyFullScreenMaskInIE6(element,{url:root+"white-bg.png",width:document.documentElement.clientWidth,height:body.clientHeight,leftOffset:leftOffset,topOffset:0})}};removeFullScreenImageMask=function(){document.body.parentNode.style.overflow=""};ensureElementHasLayoutInIE6=function(element){if(!element.currentStyle.hasLayout){element.style.zoom="1"}}})();function ensurePackage(packageName,packageBlock){var package_parts=packageName.split(".");var package_so_far=this;for(var i=0;i<package_parts.length;i+=1){var package_part=package_parts[i];if(!package_so_far[package_part]){package_so_far[package_part]={}}package_so_far=package_so_far[package_part]}if(packageBlock){packageBlock(package_so_far)
}return package_so_far}function trim(str){return ltrim(rtrim(str))}function ltrim(str){return str.replace(/^\s+/,"")}function leftTrim(str){return str.replace(new RegExp(/^\s*/g),"")}function rtrim(str){return str.replace(/\s+$/,"")}function stripParamFromUrl(param,urlToStrip){var paramterValueExpression="=[\\w\\-]*";var url=urlToStrip.replace(new RegExp("\\?"+param+paramterValueExpression+"$"),"");url=url.replace(new RegExp("\\?"+param+paramterValueExpression+"&"),"?");url=url.replace(new RegExp("&"+param+paramterValueExpression),"");return url}function isNumber(value){return typeof value==="number"}function delegateErrorHandler(to,from){to.errorHandler=from.errorHandler}function isValidUrl(url){var regexp=/(http:\/\/([\-\w]+\.)+\w{2,3}(\/[%\-\w]+(\.\w{2,})?)*(([\w\-\.\?\/+@&#;`~=%!]*)(\.\w{2,})?)*\/?)/i;return regexp.test(url)}function appendParameter(url,parameter){if(url.indexOf("?")!==-1){return url+"&"+parameter}else{return url+"?"+parameter}}function isArray(object){return object!=null&&typeof object=="object"&&"splice" in object&&"join" in object
}ensurePackage("guardian.r2");guardian.r2.DialogBox=function(){var appliedImageMask=false;var instance=this;this.showDialogBox=function(dialogBox,dialogBoxWrapper,scrollable,nonVisibleDialog){if(guardian.r2.browser.isIE6){document.body.parentNode.style.overflow="hidden"}scrollable=scrollable?scrollable:false;instance.positionDialogBox(dialogBox,dialogBoxWrapper,scrollable,nonVisibleDialog);dialogBoxWrapper.style.display="block";if(guardian.r2.browser.isIE6){dialogBoxWrapper.style.background="none";if(dialogBoxWrapperHasNotAlreadyHadImageMaskApplied(dialogBox,dialogBoxWrapper)){applyFullScreenImageMask(dialogBoxWrapper.id);appliedImageMask=true}else{dialogBoxWrapper.firstChild.style.width=document.body.clientWidth+"px";leftOffset=dialogBoxWrapper.offsetParent.offsetLeft;dialogBoxWrapper.firstChild.style.left="-"+leftOffset+"px"}}toggleHideOnPopupElements("hidden")};this.hideDialogBox=function(dialogBoxWrapper){if(guardian.r2.browser.isIE6){removeFullScreenImageMask()}toggleHideOnPopupElements("visible")
};this.positionDialogBox=function(dialogBox,dialogBoxWrapper,scrollable,nonVisibleDialog){var position=getCenterPosition();var scroll=getScrollPosition();var wrapperWidth=0;var posX=position.x;if(guardian.r2.browser.isIE6){dialogBoxWrapper.style.position="absolute";dialogBox.style.position="absolute"}dialogBoxWrapper.style.visibility="hidden";dialogBoxWrapper.style.display="block";dialogBox.style.visibility="hidden";dialogBox.style.display="block";var w=getAxisBoxModelTotalSize(dialogBox,"width");if(guardian.r2.browser.isIE6){if(dialogBoxIsContainedByWrapper(dialogBox)){wrapperWidth=getNumberPropertyValue(document.getElementById("wrapper"),"width");if(wrapperWidth<posX){posX=wrapperWidth}}}var centreX=posX/2;var centreOffset=w/2;var leftOffset=Math.round(centreX-centreOffset);dialogBoxWrapper.style.top="0px";dialogBoxWrapper.style.left="0px";dialogBox.style.left=leftOffset+"px";var boxHeight=getAxisBoxModelTotalSize(dialogBox,"height");var windowHeight=position.y;var scrollHeight=scroll.y;
var topOffset=5;if(boxHeight<windowHeight){topOffset=(windowHeight-boxHeight)/2}if(guardian.r2.browser.isIE6||scrollable){topOffset+=scrollHeight}dialogBox.style.top=topOffset+"px";dialogBox.style.visibility="";dialogBoxWrapper.style.visibility="";dialogBoxWrapper.style.display="none";if(nonVisibleDialog&&nonVisibleDialog===true){dialogBoxWrapper.style.zIndex="-1"}};this.createCloseLink=function(dialogBox,dialogBoxWrapper){function closeDialogBox(){dialogBox.style.display="none";dialogBoxWrapper.style.display="none";instance.hideDialogBox(dialogBoxWrapper)}var closeLinkId=(dialogBox.id+"-close-link");if(!document.getElementById(closeLinkId)){var closeLink=document.createElement("a");closeLink.href="#";closeLink.innerHTML="close";closeLink.id=(closeLinkId);closeLink.className="close";addEvent(closeLink,"click",closeDialogBox);var toolBox=document.createElement("p");toolBox.className="toolbox";toolBox.appendChild(closeLink);dialogBox.insertBefore(toolBox,dialogBox.firstChild)}};function dialogBoxWrapperHasNotAlreadyHadImageMaskApplied(dialogBox,dialogBoxWrapper){var isEmptyString=/^\s*$/;
if(dialogBoxIsContainedByWrapper(dialogBox)){return !appliedImageMask}return !appliedImageMask&&isEmptyString.test(dialogBoxWrapper.innerHTML)}function dialogBoxIsContainedByWrapper(dialogBox){return !(dialogBox.parentNode===document.body)}function getAxisBoxModelTotalSize(el,axis){var boxHeight,boxPadding,boxMargins,boxWidth;switch(axis){case"height":boxHeight=el.offsetHeight;boxMargins=getNumberPropertyValue(el,"marginTop")+getNumberPropertyValue(el,"marginBottom");return(boxHeight+boxMargins);case"width":boxWidth=el.offsetWidth;boxPadding=getNumberPropertyValue(el,"paddingLeft")+getNumberPropertyValue(el,"paddingRight");boxMargins=getNumberPropertyValue(el,"marginLeft")+getNumberPropertyValue(el,"marginRight");return(boxWidth+boxPadding+boxMargins)}}};ensurePackage("guardian.r2");guardian.r2.ObfuscationService=function(){var instance=this;this.encryptPassword=function(password,challenge2){return binl2hex(core_hmac_md5(challenge2,password))}};ensurePackage("guardian.r2");guardian.r2.ProfileLinkController=function(profileLinkView,userProfileUrl){function setUserProfileLink(){var atCookie=profileLinkView.readATCookie();
if(atCookie){var userNameRegExp=/\&a=([\w]*)\&/;var userName=atCookie.match(userNameRegExp)[1];var completeUrl=userProfileUrl+userName;profileLinkView.setUserProfileLink(completeUrl)}}if(profileLinkView.isUserLoggedIn()){profileLinkView.addLoadEvent(setUserProfileLink)}};ensurePackage("guardian.r2");guardian.r2.ProfileLinkView=function(elementName){this.readATCookie=function(){return readCookie("at")};this.addLoadEvent=function(callback){addEvent(document,"load",callback)};this.setUserProfileLink=function(url){var anchor=document.getElementById("profile-link");if(anchor){anchor.href=url;var profileLinkHolder=document.getElementById("profile-link-holder");profileLinkHolder.style.display=""}};this.isUserLoggedIn=function(){return isUserLoggedIntoRegPss()}};ensurePackage("guardian.r2");guardian.r2.SignInController=function(signInView,signInListeners,obfuscationService,popupUrl,setIdentityCookie,userId){var instance=this;var savedDestinationUrl;this.submitSignInForm=function(event){var formFields=signInView.getPasswordAndChallenge2FormFields();
var obfuscated_tokens=obfuscationService.encryptPassword(formFields.password,formFields.challenge2);var hidden_password=signInView.hidePassword();urlStack.clearUrlStack();urlStack.pushUrlOntoStack(savedDestinationUrl);if(setIdentityCookie){urlStack.setCookieForIdentity("GU_ID",savedDestinationUrl,userId)}signInView.submitForm(obfuscated_tokens,hidden_password);guardian.r2.event.stop(event);return false};this.forwardToRegistrationPage=function(event){urlStack.clearUrlStack();urlStack.pushUrlOntoStack(savedDestinationUrl);if(setIdentityCookie){urlStack.setCookieForIdentity("GU_ID",savedDestinationUrl,userId)}};this.openSignInBox=function(event,getTargetUrlCallback,getClassNameCallback){savedDestinationUrl=getTargetUrlCallback(event);signInView.createScriptElements();signInView.createDivElements();var packageCode=signInView.getPackageCode(event,getClassNameCallback);var popupUrlWithPackageCode=popupUrl;if(packageCode){popupUrlWithPackageCode=popupUrl+"?package="+packageCode}showSignInBox(popupUrlWithPackageCode);
guardian.r2.event.stop(event);return false};this.pushLocationToUrlStack=function(){var documentLocation=signInView.getDocumentLocation();urlStack.clearUrlStack();urlStack.pushUrlOntoStack(documentLocation);if(setIdentityCookie){urlStack.setCookieForIdentity("GU_ID",documentLocation,userId)}};this.closeSignInBox=function(event){signInView.closeDialogBox();guardian.r2.event.stop(event);return false};function showSignInBox(requestUrl){var ajaxRequest=new guardian.r2.ajax.Request(requestUrl,{method:"get",onSuccess:instance.showSignInBoxSuccess,onFailure:function(transport){signInView.updateAndShowDialogBox(transport.responseText);signInView.addSignInFormListeners(instance.submitSignInForm,instance.closeSignInBox,instance.forwardToRegistrationPage)}})}this.showSignInBoxSuccess=function(transport){signInView.updateAndShowDialogBox(transport.responseText);signInView.addSignInFormListeners(instance.submitSignInForm,instance.closeSignInBox,instance.forwardToRegistrationPage);signInView.setFocus()
};this.addListenersTo=function(element){if(!signInView.isUserLoggedIn()){if(!element){element=signInView.getDocumentBody()}signInListeners.addRegisterListeners(element,instance.pushLocationToUrlStack);signInListeners.addLoginListeners(element,instance.openSignInBox)}};this.addLogOutListeners=function(element){signInListeners.addLogoutListeners(element,instance.pushLocationToUrlStack);signInListeners.addProfileListeners(element,instance.pushLocationToUrlStack)};if(!signInView.isUserLoggedIn()){signInView.addLoadEvent(instance.addListenersTo)}else{signInView.addLoadEvent(instance.addLogOutListeners)}};ensurePackage("guardian.r2");guardian.r2.SignInListeners=function(){this.addLoginListeners=function(inElement,openSignInBoxCallback){addClickListenersToMatchingElements(inElement,"a.same-page-login-required",function(event){openSignInBoxCallback(event,getTargetUrlFromSamePageLoginAnchor,getClassNameFromSamePageLoginAnchor)});addClickListenersToMatchingElements(inElement,"a.anchor-based-login-required",function(event){openSignInBoxCallback(event,getTargetUrlFromAnchorBasedLogin,getClassNameFromAnchorBasedLogin)
});addClickListenersToMatchingElements(inElement,"form input.form-based-login-required",function(event){openSignInBoxCallback(event,getTargetUrlFromFormBasedLogin,getClassNameFromFormBasedLogin)})};this.addProfileListeners=function(inElement,profileCallback){addClickListenersToMatchingElements(inElement,"a.details-link-holder",profileCallback)};this.addRegisterListeners=function(inElement,registerCallback){addClickListenersToMatchingElements(inElement,"a.register-required",registerCallback)};this.addLogoutListeners=function(inElement,logoutCallback){addClickListenersToMatchingElements(inElement,"a.logout",logoutCallback)};function getTargetUrlFromSamePageLoginAnchor(event){return document.location}function getClassNameFromSamePageLoginAnchor(event){return getAncestorOfType(guardian.r2.event.getElement(event),"a").className}function getTargetUrlFromAnchorBasedLogin(event){return getAncestorOfType(guardian.r2.event.getElement(event),"a").href}function getClassNameFromAnchorBasedLogin(event){return getAncestorOfType(guardian.r2.event.getElement(event),"a").className
}function getTargetUrlFromFormBasedLogin(event){return getAncestorOfType(guardian.r2.event.getElement(event),"form").action}function getClassNameFromFormBasedLogin(event){return guardian.r2.event.getElement(event).className}};ensurePackage("guardian.r2");guardian.r2.SignInView=function(scriptLocation,communitiesSite){var instance=this;var dummy="----------------------------------------";var dialogBoxDivId="signin-div";var wrapperDivId="signin-div-wrapper";var dialogBox=new guardian.r2.DialogBox();this.getDocumentBody=function(){return document.body};this.addLoadEvent=function(callback){addEvent(document,"load",callback)};this.addSignInFormListeners=function(submitCallback,closeCallback,registerCallback){addEvent(document.getElementById("popUpSignIn"),"click",submitCallback);addEvent(document.getElementById("login-close-link"),"click",closeCallback);addEvent(document.getElementById("cancelSignIn"),"click",closeCallback);addEvent(document.getElementById("signin-popup-registration-link"),"click",registerCallback)
};this.hidePassword=function(){return dummy.substr(0,document.getElementById("inline-password").value.length)};this.getPasswordAndChallenge2FormFields=function(){return{challenge2:document.getElementById("AU_CHALLENGE2").value,password:document.getElementById("inline-password").value}};this.submitForm=function(obfuscated_tokens,hidden_password){document.getElementById("AU_PASSWORD_HASH").value=obfuscated_tokens;document.getElementById("inline-password").value=hidden_password;if(communitiesSite&&document.getElementById("redirect")){document.getElementById("redirect").value=window.location.href}document.getElementById("regpss1").submit()};this.createScriptElements=function(){writeScript(scriptLocation,true,function(){})};this.createDivElements=function(){createWrapperDiv();if(!document.getElementById(dialogBoxDivId)){var dialogBoxDivElement=document.createElement("div");dialogBoxDivElement.id=dialogBoxDivId;dialogBoxDivElement.className="dialog-box";document.body.appendChild(dialogBoxDivElement)
}};this.updateAndShowDialogBox=function(text,nonVisibleDialogBox){toggleHideOnPopupElements("hidden");document.getElementById(dialogBoxDivId).innerHTML=text;dialogBox.showDialogBox(document.getElementById(dialogBoxDivId),document.getElementById(wrapperDivId),false,nonVisibleDialogBox)};this.closeDialogBox=function(){var signInBoxWrapper=document.getElementById(wrapperDivId);var signInBox=document.getElementById(dialogBoxDivId);signInBox.style.display="none";signInBoxWrapper.style.display="none";dialogBox.hideDialogBox(signInBoxWrapper);toggleHideOnPopupElements("visible")};function createWrapperDiv(){if(!document.getElementById(wrapperDivId)){var wrapperDivElement=document.createElement("div");wrapperDivElement.id=wrapperDivId;wrapperDivElement.className="dialog-wrapper";document.body.appendChild(wrapperDivElement)}}this.getDocumentLocation=function(){return document.location};this.getPackageCode=function(event,getClassNameCallback){var className=getClassNameCallback(event);if(className){var packageRequiredMatcher=/package-required-(\w+)/;
var match=packageRequiredMatcher.exec(className);if(match){return match[1]}}return null};this.setFocus=function(){document.getElementById("inline-email").focus()};this.isUserLoggedIn=function(){return isUserLoggedIntoRegPss()}};ensurePackage("guardian.r2");guardian.r2.ThirdPartyReferralCookieService=function(){function createCookie(name,value,domain){document.cookie=name+"="+value+"; domain="+domain+"; path=/"}function extractDomainFromHost(host){var domainElements=host.split(".");if(domainElements.length<=1){return domainElements[0]}var domain="";for(var i=1;i<domainElements.length;i++){domain+="."+domainElements[i]}return domain}this.setThirdPartyReferralCookie=function(){var queryString=window.location.search;if(queryString){var paramsArray=queryString.substring(1).split("&");for(var index=0;index<paramsArray.length;index++){var paramNameAndValue=paramsArray[index].split("=");if(paramNameAndValue[0]==="CMP"){var domain=extractDomainFromHost(window.location.hostname);createCookie("CMP",paramNameAndValue[1],domain)
}}}}};var hoursToCount=0;var timeOut=720;var maxAdCount=100;var showAdsOnNthVideo=2;function buildIntrusiveAd(adHost,geoBandwidth,randString,commercialFolder,keywords,pageUrl,site,system,blockVideoAds,tile,partnerid){var theseCookies=document.cookie;var pos=theseCookies.indexOf("GUDHTMLAds=");if(pos==-1){var seconds=180;var expireTime=new Date();var currenttimeinmills=expireTime.getTime();expireTime.setTime(currenttimeinmills+seconds*1000);document.cookie="GUDHTMLAds=Dummy; expires="+expireTime.toGMTString()+" ; path=/ ; domain=guardian.co.uk";var intrusad='<script type="text/javascript" src="'+adHost+"/js.ng/spacedesc=01&amp;comfolder="+commercialFolder+"&amp;keywords="+keywords+"&amp;bandwidth="+geoBandwidth+"&amp;rand="+randString+"&amp;site="+site+"&amp;url="+pageUrl+"&amp;system="+system+"&amp;blockVideoAds="+blockVideoAds+"&amp;partnerid="+partnerid;if(typeof tile!=="undefined"){intrusad+="&amp;tile="+tile}intrusad+='"><\/script>';document.write(intrusad);document.close()}}function isVideoAdDisplayed(){return true
}ensurePackage("guardian.r2");(function(){var XMLHttpArray=[function(){return new XMLHttpRequest()},function(){return new ActiveXObject("Msxml2.XMLHTTP")},function(){return new ActiveXObject("Microsoft.XMLHTTP")}];function createXMLHTTPObject(){var xmlhttp=false;for(var i=0;i<XMLHttpArray.length;i++){try{xmlhttp=XMLHttpArray[i]()}catch(e){continue}break}return xmlhttp}function AjaxRequest(url,requestDetails){var requestObject=createXMLHTTPObject();var method=requestDetails.method?requestDetails.method.toLowerCase():"get";var postBody=null;if(method==="get"&&requestDetails.parameters){url+=((url.indexOf("?")===-1)?"?":"&")+requestDetails.parameters}else{postBody=requestDetails.parameters}requestObject.onreadystatechange=function(){if(requestObject.readyState!==4){return }if(requestObject.status===200){requestDetails.onSuccess(requestObject)}else{requestDetails.onFailure(requestObject)}};requestObject.open(method,url,true);if(method==="post"){requestObject.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8")
}requestObject.send(postBody)}guardian.r2.ajax={Request:AjaxRequest}})();function indeed_clk(a,sig){var hr=a.href;var si=hr.indexOf("&jsa=");if(si>0){return }var jsh=hr+"&jsa="+sig;a.href=jsh}jQ(document).ready(function(){var testCookie="GU_TEST_COOKIE";var cookieName="GU_VIDEO_SETTINGS";date=new Date();date.setTime(date.getTime()+(30*24*60*60*1000));var options={path:"/",expires:date};function setAutoplayText(){if(jQ.cookie(cookieName)=="false"){jQ(".off").show();jQ(".on").hide()}else{jQ(".on").show();jQ(".off").hide()}}function checkCookiesEnabled(){jQ.cookie(testCookie,true);if(jQ.cookie(testCookie)){jQ.cookie(testCookie,null);jQ(".cookied").show();jQ(".not-cookied").hide()}else{jQ(".not-cookied").show();jQ(".cookied").hide()}}jQ(".autoplay-on").click(function(){jQ.cookie(cookieName,"true",options);setAutoplayText();jQ("a.close-toolbox-settings").focus();return false});jQ(".autoplay-off").click(function(){jQ.cookie(cookieName,"false",options);setAutoplayText();jQ("a.close-toolbox-settings").focus();
return false});checkCookiesEnabled();setAutoplayText()});jQ(document).ready(function(){if(jQ("li.pixie")){var pixies=jQ("li.pixie");jQ(pixies).mouseenter(function(){jQ(this).find("div.trail-text").slideDown("fast")});jQ(pixies).mouseleave(function(){jQ(this).find("div.trail-text").slideUp("fast")})}});addEvent(window,"load",handleText);function handleText(){if(!document.getElementsByTagName){return }var inputFields=document.getElementsByTagName("input");for(var i=0;i<inputFields.length;i++){if(inputFields[i].className.match(/\bsearch-field\b/)){inputFields[i].onfocus=function(){clearText(this)};inputFields[i].onblur=function(){setText(this)}}}}function clearText(e){var curentText=e.value;var defaultText=e.getAttribute("title");if(curentText==defaultText){e.value=""}}function setText(e){var curentText=e.value;var defaultText=e.getAttribute("title");if(curentText==""){e.value=defaultText}}ensurePackage("guardian.r2.DateUtil");guardian.r2.DateUtil.myParseDate=function(dateString){return new Date(Date.parse(dateString.replace(/(\d\d?:\d\d?:\d\d?)(:\d?\d?\d?)?/,"$1")))
};guardian.r2.DateUtil.formatDate=function(commentDateString,currentDateString){var commentDate=guardian.r2.DateUtil.myParseDate(commentDateString);var currentDate=guardian.r2.DateUtil.myParseDate(currentDateString);var relativeTimeDifference=guardian.r2.DateUtil.relativeTimeDifference(commentDate.toUTCString(),currentDate.toUTCString());if(relativeTimeDifference!==""){if(relativeTimeDifference.indexOf("hour")>0){relativeTimeDifference="about "+relativeTimeDifference}relativeTimeDifference=" ("+relativeTimeDifference+")"}return commentDate.formatDate("d M y, g:ia")+relativeTimeDifference};guardian.r2.DateUtil.formatDateFromISO=function(dateTimeString,currentDateString){var dateTimeSplit=dateTimeString.split("T");var formattedDate=dateTimeSplit[0].replace(/-/g,"/");var dateTime=new Date(formattedDate+" "+dateTimeSplit[1]);var now=new Date(currentDateString);var relativeTimeDifference=guardian.r2.DateUtil.relativeTimeDifference(dateTime.toUTCString(),now.toUTCString());if(relativeTimeDifference!==""){return relativeTimeDifference
}else{return dateTime.formatDate("d M y, g:ia")}};guardian.r2.DateUtil.relativeTimeDifference=function(dateString,currentDateString){var date=guardian.r2.DateUtil.myParseDate(dateString);var currentDate=guardian.r2.DateUtil.myParseDate(currentDateString);var relativeTimeDifference="";var difference=currentDate.getTime()-date.getTime();if(difference<60*60*1000){var minutesAgo=Math.round(difference/(1000*60));if(minutesAgo>1){relativeTimeDifference=minutesAgo+" minutes ago"}else{relativeTimeDifference="1 minute ago"}}else{if(Math.round(difference/(1000*60*60))<24){var hoursAgo=Math.round(difference/(1000*60*60));if(hoursAgo>1){relativeTimeDifference=hoursAgo+" hours ago"}else{relativeTimeDifference=hoursAgo+" hour ago"}}}return relativeTimeDifference};guardian.r2.DateUtil.formatToISO=function(dateString){var pad=function(number){return(number>9)?number:"0"+number};var date=new Date(dateString);return date.getFullYear()+"-"+pad(date.getMonth()+1)+"-"+pad(date.getDate())};ensurePackage("guardian.r2");
guardian.r2.dom={element:new function(){var instance=this;function hasClassNameFunction(className){var classNameRegExp=new RegExp("(^| )"+className+"( |$)");return function(inputElement){return classNameRegExp.test(inputElement.className)}}this.hasClassName=function(inputElement,className){return hasClassNameFunction(className)(inputElement)};this.addClassName=function(inputElement,className){if(!instance.hasClassName(inputElement,className)){inputElement.className+=" "+className;inputElement.className=inputElement.className.replace(/^\s|\s$/,"")}};this.getElementsByCssSelector=function(cssExpression,parentElement){if(isArray(cssExpression)){var results=[];var cssExpressionLength=cssExpression.length;for(var i=0;i<cssExpressionLength;i++){results=results.concat(getElementsByIndividualCssSelector(cssExpression[i],parentElement))}return results}return getElementsByIndividualCssSelector(cssExpression,parentElement)};var getElementsByIndividualCssSelector=function(cssExpression,parentElement){var cssParts=cssExpression.split(" ");
var firstTagAndClassNamePair=cssParts[0];var moreTagAndClassNamePairs=cssParts.slice(1).join(" ");var firstTagAndClassNamePairSplit=firstTagAndClassNamePair.split(".");var tagType=firstTagAndClassNamePairSplit[0];var className=firstTagAndClassNamePairSplit[1];var selectedElements=instance.getElementsByClassName(className,tagType,parentElement);if(moreTagAndClassNamePairs){var matchingElementList=[];var selectedElementsLength=selectedElements.length;var getElementsByCssSelector=instance.getElementsByCssSelector;for(var i=0;i<selectedElementsLength;i++){matchingElementList=matchingElementList.concat(getElementsByCssSelector(moreTagAndClassNamePairs,selectedElements[i]))}return matchingElementList}return selectedElements};this.getElementsByClassName=function(className,tagType,parentElement){parentElement=parentElement?parentElement:document;className=className?className:null;if(!!document.evaluate&&className){var expression;if(tagType){expression=".//"+tagType+"[contains(concat(' ', @class, ' '), ' "+className+" ')]"
}else{expression=".//*[contains(concat(' ', @class, ' '), ' "+className+" ')]"}var query=document.evaluate(expression,parentElement,null,XPathResult.ORDERED_NODE_SNAPSHOT_TYPE,null);var results=[];for(var i=0,length=query.snapshotLength;i<length;i++){results.push(query.snapshotItem(i))}return results}tagType=tagType?tagType:"*";var matchingTags=parentElement.getElementsByTagName(tagType);if(className){var matchingElements=[];var matchingTagsLength=matchingTags.length;var elementHasSuppliedClassName=hasClassNameFunction(className);for(var i=0;i<matchingTagsLength;i++){if(elementHasSuppliedClassName(matchingTags[i])){matchingElements.push(matchingTags[i])}}return matchingElements}return convertNodeListToArray(matchingTags)};var convertNodeListToArray=function(listLikeObject){var currentPlace=listLikeObject.length;var results=[];while(currentPlace--){results[currentPlace]=listLikeObject[currentPlace]}return results}},form:new function(){var instance=this;var inputTags=["input","textarea","select"];
this.serializeForm=function(domForm){var serializedFields=[];for(var i=0;i<inputTags.length;i++){var fields=domForm.getElementsByTagName(inputTags[i]);for(var j=0;j<fields.length;j++){var field=fields[j];if(!field.disabled&&field.name){serializedFields.push(instance.serialize(field))}}}var formAction=domForm.action;return serializedFields.join("&")};this.serialize=function(element){var tagType=element.tagName.toLowerCase();var elValue=null;switch(tagType){case"textarea":elValue=element.value;break;case"input":switch(element.type.toLowerCase()){case"radio":case"checkbox":elValue=element.checked?element.value:null;break;default:elValue=element.value;break}break;case"select":var selectedOptions=[];for(var k=0;k<element.options.length;k++){if(element.options[k].selected){selectedOptions.push(element.options[k].value?element.options[k].value:element.options[k].text);if(!element.multiple){break}}}if(selectedOptions.length>0){elValue=selectedOptions.join(",")}}if(elValue!==null){return encodeURIComponent(element.name)+"="+encodeURIComponent(elValue)
}}}};ensurePackage("guardian.r2");guardian.r2.event={stop:function(event){event=event||window.event;if(event.preventDefault){event.preventDefault()}else{event.returnValue=false}if(event.stopPropagation){event.stopPropagation()}else{event.cancelBubble=true}},getElement:function(event){if(!event.target){event.target=event.srcElement||document}if(event.target.nodeType==3){event.target=event.target.parentNode}return event.target}};stylesheets=jQ("link[rel*='stylesheet']");jQ(document).ready(function(){fontSizeCookie="guFontSize";container=jQ("#wrapper");var myDate=new Date();var expires=myDate.getFullYear()+1;myDate.setFullYear(expires);expiresVar=myDate.toGMTString();printMode=false;if(window.location.toString().indexOf("/print")>0){printMode=true}if(jQ.cookie(fontSizeCookie)){var fontSize=jQ.cookie(fontSizeCookie);if(fontSize!=12){if(printMode){fontSize=resize(fontSize,4)}resizeText(fontSize);updateStylesheets(fontSize,false)}}fontSizer("#larger","#smaller");fontSizer("#larger-sidebar","#smaller-sidebar")
});function fontSizer(increase,decrease){jQ(increase).css("display","inline");jQ(decrease).css("display","inline");jQ(increase).click(function(){var currentSize=container.css("font-size");var newFontSize=resize(currentSize,2);resizeText(newFontSize);updateStylesheets(newFontSize,false);return false});jQ(decrease).click(function(){var currentSize=container.css("font-size");var newFontSize=resize(currentSize,-2);resizeText(newFontSize);updateStylesheets(newFontSize,false);return false})}function resizeText(fontSize){if(fontSize<6){fontSize=6}container.css("font-size",fontSize+"px");if(!printMode){jQ.cookie(fontSizeCookie,fontSize,{expires:expiresVar,path:"/"})}}function updateStylesheets(fontSize,isKeyboard){maxSize=26;if(isKeyboard){maxSize=32}if(fontSize>=maxSize){stylesheets.each(function(i){this.disabled=true;if(jQ(this).attr("class")=="contrast"){this.disabled=false}});jQ("link#no-layout-sheet").attr("rel","stylesheet")}else{stylesheets.each(function(i){this.disabled=false});if(guardian.r2.browser.isIE6||guardian.r2.browser.isIE7){document.getElementById("no-layout-sheet").disabled=true
}else{jQ("link#no-layout-sheet").attr("rel","alternate")}}}function resize(fontSize,measurement){return parseInt(fontSize,10)+measurement}addEvent(window,"load",GUgetUrl);function GUgetUrl(){if(!document.getElementById("go-to")){return }var myUrl=document.getElementById("go-to");for(var i=0;i<myUrl.length;i++){myUrl.onchange=function(){window.location=this.value}}}google_ad_output="js";google_ad_type="text";google_language="en";google_encoding="utf8";google_safe="high";google_feedback="on";function google_ad_request_done(google_ads){var google_attribution='<a class="ad_attribution" href="'+google_info.feedback_url+'">Ads by Google</a>';if(google_ads.length==0){return }var s="";if(google_ads[0].type=="text"){s+="<h3>"+google_attribution+"</h3>";s+='<ul class="results">';for(i=0;i<google_ads.length;++i){s+="<li>";s+='<h4><a target="_TOP" href="'+google_ads[i].url+'">'+google_ads[i].line1+"</a></h4>";s+="<p>"+google_ads[i].line2+" "+google_ads[i].line3+"</p>";s+='<p><a target="_TOP" href="'+google_ads[i].url+'">'+google_ads[i].visible_url+"</a></p>";
s+="</li>"}s+="</ul>"}function createAdvertisingDiv(){var advertisingDiv=document.getElementById("google-ads-container");if(advertisingDiv){advertisingDiv.innerHTML=s;advertisingDiv.style.display="block"}}if(loadEventList.hasFired){createAdvertisingDiv()}else{addEvent(document,"load",createAdvertisingDiv)}return }var postLoadImage=function postLoadImageFactory(){var imagesToLoad={};function postLoadImage(elementId,url){imagesToLoad[elementId]=url;document.getElementById(elementId).src=url}function loadImages(){for(var elementId in imagesToLoad){if(imagesToLoad.hasOwnProperty(elementId)){document.getElementById(elementId).src=imagesToLoad[elementId]}}}addEvent(window,"load",loadImages);return postLoadImage}();var applyImageMask=function applyImageMaskFactory(){var imagesToMask={};function applyImageMask(elementId,maskName){imagesToMask[elementId]=maskName;if(imagesToMask.hasOwnProperty(elementId)){var originalElement=document.getElementById(elementId);var parentNode=originalElement.parentNode;
var parentNodeName=parentNode.nodeName;if(parentNodeName.match(/^a$|^div/i)&&parentNode.lastChild.className!=="mask"){var maskName=imagesToMask[elementId];applyImageMaskImmediate(originalElement,maskName)}}}function applyImageMasks(){for(var elementId in imagesToMask){if(imagesToMask.hasOwnProperty(elementId)){var originalElement=document.getElementById(elementId);var parentNode=originalElement.parentNode;var parentNodeName=parentNode.nodeName;if(parentNodeName.match(/^a$|^div/i)&&parentNode.lastChild.className!=="mask"){var maskName=imagesToMask[elementId];applyImageMaskImmediate(originalElement,maskName)}}}}addEvent(window,"load",applyImageMasks);return applyImageMask}();function SearchForm(liveMode,browseHost,commentsSearchBaseUrl,webSearchBaseUrl){if(document.getElementById("search-pluck-comments")&&document.getElementById("search-pluck-comments").selected){window.location=commentsSearchBaseUrl+"?search="+escape(document.getElementById("web-search-field").value);return false}var that=this;
this.liveMode=liveMode;this.browseHost=browseHost;this.webSearchBaseUrl=webSearchBaseUrl;var searchForm=document.getElementById("search");if(searchForm){var textField=document.getElementById("web-search-field")||"";searchForm.action=this.browseHost+"/search";textField.name="search";addEvent(searchForm,"submit",checkSubmit)}function checkSubmit(e){var textField=document.getElementById("web-search-field");var form=document.getElementById("search");if(document.getElementById("search-web")&&(document.getElementById("search-web").selected||document.getElementById("search-web").checked)){textField.name="q";form.action=that.webSearchBaseUrl}else{if(document.getElementById("search-section")&&document.getElementById("search-section").selected){textField.name="search";form.action=that.browseHost+"/search/"+document.getElementById("search-section").value}else{textField.name="search";form.action=that.browseHost+"/search"}}return }}function UrlStack(cookieDomain){this.escapePlus=function(value){return escape(value).replace(/\+/,"%2B")
};this.cookieDomain=cookieDomain}UrlStack.prototype.getCookieForUrlStack=function(name){if(!document.cookie){return""}var dc=document.cookie;var prefix=name+"=";var begin=dc.indexOf("; "+prefix);if(begin==-1){begin=dc.indexOf(prefix);if(begin!=0){return null}}else{begin+=2}var end=document.cookie.indexOf(";",begin);if(end==-1){end=dc.length}return unescape(dc.substring(begin+prefix.length,end))};UrlStack.prototype.setCookieForUrlStack=function(name,value){var curCookie=name+"="+this.escapePlus(value)+"; domain="+this.cookieDomain+"; path=/";document.cookie=curCookie};UrlStack.prototype.setCookieForIdentity=function(name,value,userId){var timestamp=new Date();var expires=new Date(timestamp.getTime()+1000*60*5);var curCookie=name+"="+this.escapePlus("userId="+userId+"&returnUrl="+value)+"; domain="+this.cookieDomain+"; path=/; expires="+expires.toGMTString();document.cookie=curCookie};UrlStack.prototype.pushUrlOntoStack=function(url){var cookie=this.getCookieForUrlStack("GU_ST");var stack=cookie?cookie.split("|"):new Array();
if(stack.length==0||(stack.length>0&&stack[stack.length-1]!=url)){stack[stack.length]=url;this.setCookieForUrlStack("GU_ST",stack.join("|"))}return true};UrlStack.prototype.URLStack_pop=function(){var cookie="|"+this.getCookieForUrlStack("GU_ST");var x=cookie.lastIndexOf("|");var url=cookie.substring(x+1);this.setCookieForUrlStack("GU_ST",cookie.substring(0,x));return url};UrlStack.prototype.clearUrlStack=function(){if(this.getCookieForUrlStack("GU_ST")!=""){this.setCookieForUrlStack("GU_ST","")}};function signIn(){urlStack.pushUrlOntoStack(document.location);window.location="/Users/signin/0,,-1,00.html";return false}function signOut(){urlStack.pushUrlOntoStack(document.location);window.location="/Users/signout/tr/1,,,00.html";return false}var swfobject=function(){var b="undefined",Q="object",n="Shockwave Flash",p="ShockwaveFlash.ShockwaveFlash",P="application/x-shockwave-flash",m="SWFObjectExprInst",j=window,K=document,T=navigator,o=[],N=[],i=[],d=[],J,Z=null,M=null,l=null,e=false,A=false;
var h=function(){var v=typeof K.getElementById!=b&&typeof K.getElementsByTagName!=b&&typeof K.createElement!=b,AC=[0,0,0],x=null;if(typeof T.plugins!=b&&typeof T.plugins[n]==Q){x=T.plugins[n].description;if(x&&!(typeof T.mimeTypes!=b&&T.mimeTypes[P]&&!T.mimeTypes[P].enabledPlugin)){x=x.replace(/^.*\s+(\S+\s+\S+$)/,"$1");AC[0]=parseInt(x.replace(/^(.*)\..*$/,"$1"),10);AC[1]=parseInt(x.replace(/^.*\.(.*)\s.*$/,"$1"),10);AC[2]=/r/.test(x)?parseInt(x.replace(/^.*r(.*)$/,"$1"),10):0}}else{if(typeof j.ActiveXObject!=b){var y=null,AB=false;try{y=new ActiveXObject(p+".7")}catch(t){try{y=new ActiveXObject(p+".6");AC=[6,0,21];y.AllowScriptAccess="always"}catch(t){if(AC[0]==6){AB=true}}if(!AB){try{y=new ActiveXObject(p)}catch(t){}}}if(!AB&&y){try{x=y.GetVariable("$version");if(x){x=x.split(" ")[1].split(",");AC=[parseInt(x[0],10),parseInt(x[1],10),parseInt(x[2],10)]}}catch(t){}}}}var AD=T.userAgent.toLowerCase(),r=T.platform.toLowerCase(),AA=/webkit/.test(AD)?parseFloat(AD.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):false,q=false,z=r?/win/.test(r):/win/.test(AD),w=r?/mac/.test(r):/mac/.test(AD);
/*@cc_on q=true;@if(@_win32)z=true;@elif(@_mac)w=true;@end@*/
return{w3cdom:v,pv:AC,webkit:AA,ie:q,win:z,mac:w}}();var L=function(){if(!h.w3cdom){return }f(H);if(h.ie&&h.win){try{K.write("<script id=__ie_ondomload defer=true src=//:><\/script>");J=C("__ie_ondomload");if(J){I(J,"onreadystatechange",S)}}catch(q){}}if(h.webkit&&typeof K.readyState!=b){Z=setInterval(function(){if(/loaded|complete/.test(K.readyState)){E()}},10)}if(typeof K.addEventListener!=b){K.addEventListener("DOMContentLoaded",E,null)}R(E)}();function S(){if(J.readyState=="complete"){if(J.parentNode){J.parentNode.removeChild(J)}E()}}function E(){if(e){return }if(h.ie&&h.win){var v=a("span");try{var u=K.getElementsByTagName("body")[0].appendChild(v);u.parentNode.removeChild(u)}catch(w){return }}e=true;if(Z){clearInterval(Z);Z=null}var q=o.length;for(var r=0;r<q;r++){o[r]()}}function f(q){if(e){q()}else{o[o.length]=q}}function R(r){if(typeof j.addEventListener!=b){j.addEventListener("load",r,false)}else{if(typeof K.addEventListener!=b){K.addEventListener("load",r,false)
}else{if(typeof j.attachEvent!=b){I(j,"onload",r)}else{if(typeof j.onload=="function"){var q=j.onload;j.onload=function(){q();r()}}else{j.onload=r}}}}}function H(){var t=N.length;for(var q=0;q<t;q++){var u=N[q].id;if(h.pv[0]>0){var r=C(u);if(r){N[q].width=r.getAttribute("width")?r.getAttribute("width"):"0";N[q].height=r.getAttribute("height")?r.getAttribute("height"):"0";if(c(N[q].swfVersion)){if(h.webkit&&h.webkit<312){Y(r)}W(u,true)}else{if(N[q].expressInstall&&!A&&c("6.0.65")&&(h.win||h.mac)){k(N[q])}else{O(r)}}}}else{W(u,true)}}}function Y(t){var q=t.getElementsByTagName(Q)[0];if(q){var w=a("embed"),y=q.attributes;if(y){var v=y.length;for(var u=0;u<v;u++){if(y[u].nodeName=="DATA"){w.setAttribute("src",y[u].nodeValue)}else{w.setAttribute(y[u].nodeName,y[u].nodeValue)}}}var x=q.childNodes;if(x){var z=x.length;for(var r=0;r<z;r++){if(x[r].nodeType==1&&x[r].nodeName=="PARAM"){w.setAttribute(x[r].getAttribute("name"),x[r].getAttribute("value"))}}}t.parentNode.replaceChild(w,t)}}function k(w){A=true;
var u=C(w.id);if(u){if(w.altContentId){var y=C(w.altContentId);if(y){M=y;l=w.altContentId}}else{M=G(u)}if(!(/%$/.test(w.width))&&parseInt(w.width,10)<310){w.width="310"}if(!(/%$/.test(w.height))&&parseInt(w.height,10)<137){w.height="137"}K.title=K.title.slice(0,47)+" - Flash Player Installation";var z=h.ie&&h.win?"ActiveX":"PlugIn",q=K.title,r="MMredirectURL="+j.location+"&MMplayerType="+z+"&MMdoctitle="+q,x=w.id;if(h.ie&&h.win&&u.readyState!=4){var t=a("div");x+="SWFObjectNew";t.setAttribute("id",x);u.parentNode.insertBefore(t,u);u.style.display="none";var v=function(){u.parentNode.removeChild(u)};I(j,"onload",v)}U({data:w.expressInstall,id:m,width:w.width,height:w.height},{flashvars:r},x)}}function O(t){if(h.ie&&h.win&&t.readyState!=4){var r=a("div");t.parentNode.insertBefore(r,t);r.parentNode.replaceChild(G(t),r);t.style.display="none";var q=function(){t.parentNode.removeChild(t)};I(j,"onload",q)}else{t.parentNode.replaceChild(G(t),t)}}function G(v){var u=a("div");if(h.win&&h.ie){u.innerHTML=v.innerHTML
}else{var r=v.getElementsByTagName(Q)[0];if(r){var w=r.childNodes;if(w){var q=w.length;for(var t=0;t<q;t++){if(!(w[t].nodeType==1&&w[t].nodeName=="PARAM")&&!(w[t].nodeType==8)){u.appendChild(w[t].cloneNode(true))}}}}}return u}function U(AG,AE,t){var q,v=C(t);if(v){if(typeof AG.id==b){AG.id=t}if(h.ie&&h.win){var AF="";for(var AB in AG){if(AG[AB]!=Object.prototype[AB]){if(AB.toLowerCase()=="data"){AE.movie=AG[AB]}else{if(AB.toLowerCase()=="styleclass"){AF+=' class="'+AG[AB]+'"'}else{if(AB.toLowerCase()!="classid"){AF+=" "+AB+'="'+AG[AB]+'"'}}}}}var AD="";for(var AA in AE){if(AE[AA]!=Object.prototype[AA]){AD+='<param name="'+AA+'" value="'+AE[AA]+'" />'}}v.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+AF+">"+AD+"</object>";i[i.length]=AG.id;q=C(AG.id)}else{if(h.webkit&&h.webkit<312){var AC=a("embed");AC.setAttribute("type",P);for(var z in AG){if(AG[z]!=Object.prototype[z]){if(z.toLowerCase()=="data"){AC.setAttribute("src",AG[z])}else{if(z.toLowerCase()=="styleclass"){AC.setAttribute("class",AG[z])
}else{if(z.toLowerCase()!="classid"){AC.setAttribute(z,AG[z])}}}}}for(var y in AE){if(AE[y]!=Object.prototype[y]){if(y.toLowerCase()!="movie"){AC.setAttribute(y,AE[y])}}}v.parentNode.replaceChild(AC,v);q=AC}else{var u=a(Q);u.setAttribute("type",P);for(var x in AG){if(AG[x]!=Object.prototype[x]){if(x.toLowerCase()=="styleclass"){u.setAttribute("class",AG[x])}else{if(x.toLowerCase()!="classid"){u.setAttribute(x,AG[x])}}}}for(var w in AE){if(AE[w]!=Object.prototype[w]&&w.toLowerCase()!="movie"){F(u,w,AE[w])}}v.parentNode.replaceChild(u,v);q=u}}}return q}function F(t,q,r){var u=a("param");u.setAttribute("name",q);u.setAttribute("value",r);t.appendChild(u)}function X(r){var q=C(r);if(q&&(q.nodeName=="OBJECT"||q.nodeName=="EMBED")){if(h.ie&&h.win){if(q.readyState==4){B(r)}else{j.attachEvent("onload",function(){B(r)})}}else{q.parentNode.removeChild(q)}}}function B(t){var r=C(t);if(r){for(var q in r){if(typeof r[q]=="function"){r[q]=null}}r.parentNode.removeChild(r)}}function C(t){var q=null;try{q=K.getElementById(t)
}catch(r){}return q}function a(q){return K.createElement(q)}function I(t,q,r){t.attachEvent(q,r);d[d.length]=[t,q,r]}function c(t){var r=h.pv,q=t.split(".");q[0]=parseInt(q[0],10);q[1]=parseInt(q[1],10)||0;q[2]=parseInt(q[2],10)||0;return(r[0]>q[0]||(r[0]==q[0]&&r[1]>q[1])||(r[0]==q[0]&&r[1]==q[1]&&r[2]>=q[2]))?true:false}function V(v,r){if(h.ie&&h.mac){return }var u=K.getElementsByTagName("head")[0],t=a("style");t.setAttribute("type","text/css");t.setAttribute("media","screen");if(!(h.ie&&h.win)&&typeof K.createTextNode!=b){t.appendChild(K.createTextNode(v+" {"+r+"}"))}u.appendChild(t);if(h.ie&&h.win&&typeof K.styleSheets!=b&&K.styleSheets.length>0){var q=K.styleSheets[K.styleSheets.length-1];if(typeof q.addRule==Q){q.addRule(v,r)}}}function W(t,q){var r=q?"visible":"hidden";if(e&&C(t)){C(t).style.visibility=r}else{V("#"+t,"visibility:"+r)}}function g(s){var r=/[\\\"<>\.;]/;var q=r.exec(s)!=null;return q?encodeURIComponent(s):s}var D=function(){if(h.ie&&h.win){window.attachEvent("onunload",function(){var w=d.length;
for(var v=0;v<w;v++){d[v][0].detachEvent(d[v][1],d[v][2])}var t=i.length;for(var u=0;u<t;u++){X(i[u])}for(var r in h){h[r]=null}h=null;for(var q in swfobject){swfobject[q]=null}swfobject=null})}}();return{registerObject:function(u,q,t){if(!h.w3cdom||!u||!q){return }var r={};r.id=u;r.swfVersion=q;r.expressInstall=t?t:false;N[N.length]=r;W(u,false)},getObjectById:function(v){var q=null;if(h.w3cdom){var t=C(v);if(t){var u=t.getElementsByTagName(Q)[0];if(!u||(u&&typeof t.SetVariable!=b)){q=t}else{if(typeof u.SetVariable!=b){q=u}}}}return q},embedSWF:function(x,AE,AB,AD,q,w,r,z,AC){if(!h.w3cdom||!x||!AE||!AB||!AD||!q){return }AB+="";AD+="";if(c(q)){W(AE,false);var AA={};if(AC&&typeof AC===Q){for(var v in AC){if(AC[v]!=Object.prototype[v]){AA[v]=AC[v]}}}AA.data=x;AA.width=AB;AA.height=AD;var y={};if(z&&typeof z===Q){for(var u in z){if(z[u]!=Object.prototype[u]){y[u]=z[u]}}}if(r&&typeof r===Q){for(var t in r){if(r[t]!=Object.prototype[t]){if(typeof y.flashvars!=b){y.flashvars+="&"+t+"="+r[t]}else{y.flashvars=t+"="+r[t]
}}}}f(function(){U(AA,y,AE);if(AA.id==AE){W(AE,true)}})}else{if(w&&!A&&c("6.0.65")&&(h.win||h.mac)){A=true;W(AE,false);f(function(){var AF={};AF.id=AF.altContentId=AE;AF.width=AB;AF.height=AD;AF.expressInstall=w;k(AF)})}}},getFlashPlayerVersion:function(){return{major:h.pv[0],minor:h.pv[1],release:h.pv[2]}},hasFlashPlayerVersion:c,createSWF:function(t,r,q){if(h.w3cdom){return U(t,r,q)}else{return undefined}},removeSWF:function(q){if(h.w3cdom){X(q)}},createCSS:function(r,q){if(h.w3cdom){V(r,q)}},addDomLoadEvent:f,addLoadEvent:R,getQueryParamValue:function(v){var u=K.location.search||K.location.hash;if(v==null){return g(u)}if(u){var t=u.substring(1).split("&");for(var r=0;r<t.length;r++){if(t[r].substring(0,t[r].indexOf("="))==v){return g(t[r].substring((t[r].indexOf("=")+1)))}}}return""},expressInstallCallback:function(){if(A&&M){var q=C(m);if(q){q.parentNode.replaceChild(M,q);if(l){W(l,true);if(h.ie&&h.win){M.style.display="block"}}M=null;l=null;A=false}}}}}();function initialiseTabs(){if(jQ("ul.tabs")){var tab=jQ("ul.tabs:not(.fake) li a");
var initiallyActive=jQ("ul.tabs:not(.fake) li a.active");var initialPane;for(i=0;i<=initiallyActive.length-1;i++){initialPane="#"+initiallyActive[i].href.split("#")[1];jQ(initialPane).show()}jQ(tab).click(function(){if(jQ(this).is(".inactive")){var parentContainer=jQ(this).parents("div").get(0);var activeTab=jQ(parentContainer).find("ul.tabs:not(.fake) li a.active");var pane="#"+this.href.split("#")[1];var activeTabHref=jQ(activeTab).attr("href");var activePane="#"+activeTabHref.split("#")[1];jQ(activeTab).attr("class","inactive");jQ(this).attr("class","active");jQ(pane).show();jQ(activePane).hide();return false}else{return false}})}}jQ(document).ready(function(){initialiseTabs()});TextResizeDetector=function(){var el=null;var iIntervalDelay=200;var iInterval=null;var iCurrSize=-1;var iBase=-1;var aListeners=[];var createControlElement=function(){el=document.createElement("span");el.id="textResizeControl";el.innerHTML="&nbsp;";el.style.position="absolute";el.style.left="-9999px";var elC=document.getElementById(TextResizeDetector.TARGET_ELEMENT_ID);
if(elC){elC.insertBefore(el,elC.firstChild)}iBase=iCurrSize=TextResizeDetector.getSize()};function _stopDetector(){window.clearInterval(iInterval);iInterval=null}function _startDetector(){if(!iInterval){iInterval=window.setInterval("TextResizeDetector.detect()",iIntervalDelay)}}function _detect(){var iNewSize=TextResizeDetector.getSize();if(iNewSize!==iCurrSize){for(var i=0;i<aListeners.length;i++){aListnr=aListeners[i];var oArgs={iBase:iBase,iDelta:((iCurrSize!=-1)?iNewSize-iCurrSize+"px":"0px"),iSize:iCurrSize=iNewSize};if(!aListnr.obj){aListnr.fn("textSizeChanged",[oArgs])}else{aListnr.fn.apply(aListnr.obj,["textSizeChanged",[oArgs]])}}}return iCurrSize}var onAvailable=function(){if(!TextResizeDetector.onAvailableCount_i){TextResizeDetector.onAvailableCount_i=0}if(document.getElementById(TextResizeDetector.TARGET_ELEMENT_ID)){TextResizeDetector.init();if(TextResizeDetector.USER_INIT_FUNC){TextResizeDetector.USER_INIT_FUNC()}TextResizeDetector.onAvailableCount_i=null}else{if(TextResizeDetector.onAvailableCount_i<600){TextResizeDetector.onAvailableCount_i++;
setTimeout(onAvailable,200)}}};setTimeout(onAvailable,500);return{init:function(){createControlElement();_startDetector()},addEventListener:function(fn,obj,bScope){aListeners[aListeners.length]={fn:fn,obj:obj};return iBase},detect:function(){return _detect()},getSize:function(){var iSize;return el.offsetHeight},stopDetector:function(){return _stopDetector()},startDetector:function(){return _startDetector()}}}();TextResizeDetector.TARGET_ELEMENT_ID="doc";TextResizeDetector.USER_INIT_FUNC=null;function init(){var iBase=TextResizeDetector.addEventListener(onFontResize,null);if(jQ("body")){if(iBase>32){updateStylesheets(iBase,true)}}}TextResizeDetector.TARGET_ELEMENT_ID="wrapper";TextResizeDetector.USER_INIT_FUNC=init;function onFontResize(e,args){updateStylesheets(args[0].iSize,true)}function maskMediaImages(){var images=document.getElementsByTagName("img");var imagesToProcess=[];forEachElementOf(images,function(image){imagesToProcess.push(image)});var maskClass=/([a-zA-Z]+)-mask/;var anchorOrDiv=/^a$|^div/i;
forEachElementOf(imagesToProcess,function(image){var matchMaskClass=maskClass.exec(image.className);if(matchMaskClass&&image.parentNode.nodeName.match(anchorOrDiv)){var maskName=matchMaskClass[1];applyImageMaskImmediate(image,maskName)}})}addEvent(window,"load",maskMediaImages);